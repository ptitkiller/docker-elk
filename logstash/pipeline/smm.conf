input {
	kafka {
		bootstrap_servers => "66.42.61.89:19092,66.42.61.89:29092,66.42.61.89:39092,149.28.143.127:19082,149.28.143.127:29082,149.28.143.127:39082"
		topics_pattern => "smm-.*"
		group_id => "smm"
		auto_offset_reset => "earliest"
	}
}

filter {
 	mutate {
	    rename  => [ "message", "msg" ]
	}
	json {
	    source => ["msg"]
	    remove_field => ["msg"]
	 }
}

## Add your filters / logstash plugins configuration here

output {
	stdout { codec => rubydebug }
	elasticsearch {
		hosts => "172.16.0.63:9200"
		index => "%{pindex}"
		sniffing => true
		retry_on_conflict => 10
		http_compression => true
		document_type => "%{ptype}"
		document_id => "%{pid}"
		doc_as_upsert => true
		action => "update"
	}
}